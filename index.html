<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø³ÙŠÙ„ÙÙŠ</title>
<style>
  body {
    background: #0f172a;
    color: #00ffff;
    font-family: monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    gap: 15px;
  }

  video, canvas {
    border: 2px solid #00ffff;
    border-radius: 10px;
    width: 320px;
    height: 240px;
    object-fit: cover;
  }

  button {
    background: #00ffff;
    color: #0f172a;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
  }

  button:hover {
    background: #ff00ff;
    color: white;
  }
</style>
</head>
<body>

  <h2>ğŸ“¸ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø³ÙŠÙ„ÙÙŠ</h2>

  <video id="camera" autoplay playsinline></video>
  <canvas id="snapshot" width="320" height="240" style="display:none;"></canvas>

  <div>
    <button id="startBtn">ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
    <button id="captureBtn">Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©</button>
  </div>

  <script>
    const video = document.getElementById('camera');
    const canvas = document.getElementById('snapshot');
    const startBtn = document.getElementById('startBtn');
    const captureBtn = document.getElementById('captureBtn');
    let stream;

    // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
    startBtn.addEventListener('click', async () => {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      } catch (error) {
        alert('âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª.');
        console.error(error);
      }
    });

    // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©
    captureBtn.addEventListener('click', () => {
      if (!stream) {
        alert('Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø£ÙˆÙ„Ø§Ù‹!');
        return;
      }

      const context = canvas.getContext('2d');
      context.drawImage(video, 0, 0, canvas.width, canvas.height);

      // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„
      const imageUrl = canvas.toDataURL('image/png');
      const link = document.createElement('a');
      link.href = imageUrl;
      link.download = 'selfie.png';
      link.click();

      alert('âœ… ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©! ÙŠÙ…ÙƒÙ†Ùƒ Ø­ÙØ¸Ù‡Ø§.');
    });
  </script>

</body>
</html>